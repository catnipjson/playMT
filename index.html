
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>MFS25 - 2D Blocky Mode</title>
  <style>
    html, body {
      margin: 0;
      overflow: hidden;
      background: #000;
      font-family: sans-serif;
    }
    canvas {
      display: block;
      background: #111;
    }
    .controls {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 10px;
      z-index: 5;
    }
    .controls button {
      width: 60px;
      height: 60px;
      border: none;
      border-radius: 10px;
      background: rgba(200, 200, 200, 0.3);
      color: white;
      font-size: 20px;
      backdrop-filter: blur(4px);
    }
    .hud {
      position: absolute;
      top: 10px;
      left: 10px;
      color: white;
      font-size: 18px;
      background: rgba(0,0,0,0.3);
      padding: 8px;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <canvas id="gameCanvas" width="1280" height="720"></canvas>
  <div class="hud">
    Speed: <span id="speed">0</span> knots<br>
    Heading: <span id="heading">0</span>°
  </div>
  <div class="controls">
    <button onclick="turnLeft()">⟲</button>
    <button onclick="decelerate()">–</button>
    <button onclick="accelerate()">+</button>
    <button onclick="turnRight()">⟳</button>
  </div>

  <script>
    const canvas = document.getElementById('gameCanvas');
    const ctx = canvas.getContext('2d');
    let keys = {};

    // Blocky A340 (2D rectangle)
    let plane = {
      x: 500,
      y: 500,
      speed: 0,
      angle: 0,
      width: 60,
      height: 20,
      maxSpeed: 5,
      acceleration: 0.05
    };

    // Blocky city map
    const mapCanvas = document.createElement('canvas');
    mapCanvas.width = 3000;
    mapCanvas.height = 3000;
    const mapCtx = mapCanvas.getContext('2d');

    function drawCityMap() {
      mapCtx.fillStyle = '#222';
      mapCtx.fillRect(0, 0, mapCanvas.width, mapCanvas.height);
      mapCtx.fillStyle = '#444';
      for (let i = 0; i < 300; i++) {
        const x = Math.random() * mapCanvas.width;
        const y = Math.random() * mapCanvas.height;
        const w = 40 + Math.random() * 60;
        const h = 40 + Math.random() * 60;
        mapCtx.fillRect(x, y, w, h);
      }
      mapCtx.fillStyle = '#3366cc';
      mapCtx.fillRect(1000, 1500, 800, 200); // Water block
      mapCtx.fillStyle = '#888';
      mapCtx.fillRect(1400, 1800, 200, 20); // Bridge
    }

    drawCityMap();

    function update() {
      if (keys['ArrowLeft']) plane.angle -= 2;
      if (keys['ArrowRight']) plane.angle += 2;
      if (keys['ArrowUp']) accelerate();
      if (keys['ArrowDown']) decelerate();

      let rad = plane.angle * Math.PI / 180;
      plane.x += Math.cos(rad) * plane.speed;
      plane.y += Math.sin(rad) * plane.speed;

      document.getElementById("speed").innerText = Math.round(plane.speed * 100);
      document.getElementById("heading").innerText = (plane.angle % 360 + 360) % 360;
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      let offsetX = canvas.width / 2 - plane.x;
      let offsetY = canvas.height / 2 - plane.y;
      ctx.drawImage(mapCanvas, offsetX, offsetY);

      // Draw plane as blocky shape
      ctx.save();
      ctx.translate(canvas.width / 2, canvas.height / 2);
      ctx.rotate(plane.angle * Math.PI / 180);
      ctx.fillStyle = "#FFCC00";
      ctx.fillRect(-plane.width/2, -plane.height/2, plane.width, plane.height);
      ctx.restore();
    }

    function loop() {
      update();
      draw();
      requestAnimationFrame(loop);
    }

    function turnLeft() { plane.angle -= 5; }
    function turnRight() { plane.angle += 5; }
    function accelerate() {
      plane.speed += plane.acceleration;
      if (plane.speed > plane.maxSpeed) plane.speed = plane.maxSpeed;
    }
    function decelerate() {
      plane.speed -= plane.acceleration;
      if (plane.speed < 0) plane.speed = 0;
    }

    window.addEventListener("keydown", e => keys[e.key] = true);
    window.addEventListener("keyup", e => keys[e.key] = false);

    loop();
  </script>
</body>
</html>
